# ─────────────────────────────────────────────────────────────────────────────
# Observe_mail – Mail Observer Service
#
# Role in the pipeline:
#   Consumes from the [payment-confirmations] notify queue (published by
#   PaymentConfirmationPublisher after a successful Stripe payment) and
#   dispatches transactional email notifications to the end user.
# ─────────────────────────────────────────────────────────────────────────────

spring.application.name=mail-observer
server.port=8082

# ── Kafka ────────────────────────────────────────────────────────────────────
spring.kafka.bootstrap-servers=${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}

# Consumer settings
spring.kafka.consumer.group-id=notification-observer-group
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.enable-auto-commit=false
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.apache.kafka.common.serialization.StringDeserializer

# Listener ack mode – MANUAL so TransactionEventListener controls commits
spring.kafka.listener.ack-mode=MANUAL

# ── Topic references ─────────────────────────────────────────────────────────
# "Notify queue" – PaymentConfirmationPublisher publishes here on payment success
kafka.payment.confirm.topic=payment-confirmations

# Consumer group (referenced in @KafkaListener)
kafka.group-id=notification-observer-group

# ── Mail / SendGrid ──────────────────────────────────────────────────────────
sendgrid.api-key=${SENDGRID_API_KEY:MOCK}
mail.from-email=${MAIL_FROM_EMAIL:notifications@example.com}
mail.from-name=${MAIL_FROM_NAME:Notification System}

# ── Logging ──────────────────────────────────────────────────────────────────
logging.level.root=INFO
logging.level.com.example.mail=DEBUG
logging.level.org.springframework.kafka=WARN
logging.level.org.apache.kafka=WARN
